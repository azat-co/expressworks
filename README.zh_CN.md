expressworks
============

ä»æœ‰å…³ Express.js æœ€å¥½çš„ä¹¦ç±[Pro Express.js](http://proexpressjs.com)çš„ä½œè€…å¤„å­¦ä¹  Express.js æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚


![Hello World Express.js app](https://raw.github.com/azat-co/expressworks/master/images/screen.png)  

è¿™ä¸ª Express.js workshop æ˜¯åŸºäº [workshopper](https://github.com/rvagg/workshopper) å¹¶å¯è¿ªè‡ª [@substack](https://twitter.com/substack) ä¸ [@maxogden](https://twitter.com/maxogden) æ‰€åˆ¶ä½œçš„ [stream-adventure](https://github.com/substack/stream-adventure) ã€‚

ExpressWorks ä¼šæä¾›ç»™æ‚¨æŒ‘æˆ˜å’Œæç¤ºã€‚æ‚¨é’ˆå¯¹è¿™äº›é—®é¢˜å†™å‡ºä¸€ä¸ª Express.js app ä½œä¸ºè§£å†³æ–¹æ¡ˆä¹‹åï¼ŒExpressWorks å°†ä¼šéªŒè¯æ‚¨çš„è§£æ³•æ˜¯å¦æ­£ç¡®ã€‚
[![](https://raw.github.com/azat-co/expressworks/master/images/youtube.png)](https://www.youtube.com/watch?v=C2IqQOLCCoU&list=PLguYmmjtxbWGwQRxXqMTQCj6FNb55aFVo)

**è§†é¢‘æˆªå›¾** å¸¦ä½ ç†Ÿæ‚‰ä¸€ä¸‹å®‰è£…æµç¨‹å’Œå¯èƒ½ä¼šå‡ºç°çš„é—®é¢˜(å‰§é€): [YouTube ExpressWorks](https://www.youtube.com/watch?v=C2IqQOLCCoU&list=PLguYmmjtxbWGwQRxXqMTQCj6FNb55aFVo). ğŸ“ºğŸ’»ğŸ˜
  
  
è¿™ä¸ª workshop æ˜¯ [Pro Express.js](http://proexpressjs.com) (Apress 2014)çš„ä½œè€… [Azat Mardan](http://azat.co)å¸¦ç»™ä½ çš„.

[![](https://raw.github.com/azat-co/expressworks/master/images/cover.jpg)](http://proexpressjs.com)   
## é€ŸæŸ¥è¡¨

åœ¨å¼€å§‹è¿™æ®µç¾å¦™çš„æ—…ç¨‹ä¹‹å‰ï¼Œä½ å¯èƒ½éœ€è¦ä¸‹è½½ [å…è´¹ Express.js é€ŸæŸ¥è¡¨](https://gumroad.com/l/NQiQ/git-874E6FB4)ï¼Œ æˆ–è€… [åœ¨çº¿æµè§ˆ](https://gumroad.com/l/NQiQ/git-874E6FB4).
## è¯­è¨€

* è‹±è¯­
* æ³•è¯­
* ç®€ä½“ä¸­æ–‡
* ç¹ä½“ä¸­æ–‡
* éŸ©è¯­
* æ—¥è¯­

## è´¡çŒ®è€…

```
95  Azat Mardan
19  Christophe Porteneuve
10  Tyler Moeller
 8  Justin Porter
 6  billy3321
 3  Harry Moreno
 3  Charlotte Spencer
 3  Kohei TAKATA
 2  Julian Mazzitelli
 2  Robbie Holmes
 2  Shim Won
 2  Thomas Burette
 2  Austin Corso
 2  azat-co
 2  Kevin Jayanthan
 2  intrueder
 1  Timothy Gu
 1  Trevor Whitney
 1  Wojciech Gawronski
 1  brownman
 1  raj
 1  Alessandro Lensi
 1  swisherb
 1  Alfredo Miranda
 1  Ayman Mahfouz
 1  Daniel Geier
 1  Dylan Smith
 1  Eddie Hsieh
 1  Finn
 1  Gabe Fernando
 1  Giuseppe
 1  Jessie Shi
 1  Johan Binard
 1  Jonny Arnold
 1  Kevin Kuhl
 1  Louis Pilfold
 1  Rich Trott
 1  Richard Kho
 1  Ryan Kois
```

å‘ç»™æˆ‘ä»¬ä¸€ä¸ª Pull Requestï¼Œå°±å¯ä»¥çœ‹åˆ°æ‚¨çš„åå­—å‡ºç°åœ¨è¿™é‡Œã€‚ ;-)

PS: äº§ç”Ÿè‡ª `git shortlog -n -s`

## å®‰è£… (å»ºè®®æ–¹å¼)

å»ºè®®å°†è¿™ä¸ªç¨‹åºè£…åœ¨ç³»ç»Ÿé‡Œï¼š

```bash
$ npm install express
$ npm install -g expressworks
$ expressworks
```


å¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œå°è¯•è¿™æ ·å®‰è£…ï¼š

```bash
$ sudo npm install -g expressworks
$ expressworks
```

## å®‰è£…åœ¨æ‰€åœ¨ç›®å½•ï¼ˆé«˜çº§æ–¹å¼ï¼‰

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä»¥å®‰è£…åœ¨æ‰€åœ¨ç›®å½•ï¼š

```bash
$ mkdir node_modules
$ npm install expressworks
$ cd node_modules/expressworks
$ node expressworks
```

# ä½¿ç”¨æ–¹å¼
*æ³¨æ„* ï¼š ExpressWorks éœ€è¦åœ¨å½“å‰ç›®å½•å¤åˆ¶ä¸€ä»½å¯ç”¨çš„ express ç¨‹åºã€‚åšæŒ‘æˆ˜ä¹‹å‰ï¼Œè¯·ç¡®è®¤å·²ç»æ‰§è¡Œä»¥ä¸‹å‘½ä»¤

```
$ npm init
$ npm install express@4.11.2
```

è¯·å‰å¾€ç¦»çº¿å®‰è£…ç¯èŠ‚æŸ¥çœ‹æ›´å¤šéœ€è¦çš„ä¾èµ–.

ExpressWorks å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

```
Usage

  expressworks
    æ˜¾ç¤ºäº’åŠ¨å¼æ¸…å•ï¼Œä»¥é€‰æ‹©ä¸€ä¸ª workshop ã€‚
  expressworks list
    æ˜¾ç¤ºæ‰€æœ‰çš„ workshopï¼Œä¸€è¡Œä¸€ä¸ªã€‚
  expressworks select ã€Œworkshop åå­—ã€
    é€‰æ‹©ä¸€ä¸ª workshop
  expressworks current
    æ˜¾ç¤ºç›®å‰å·²é€‰çš„ workshop
  expressworks run program.js
    æ‰§è¡Œæ‚¨çš„ç¨‹åºå¤„ç†é€‰å®šçš„è¼¸å…¥
  expressworks verify program.js
    éªŒè¯æ‚¨çš„ç¨‹åºæ˜¯å¦æœ‰é¢„æœŸçš„è¾“å‡º
```  
# ç¦»çº¿å®‰è£…

å¦‚æœä½ æå‰å®‰è£…æ‰€æœ‰ node åŒ…ï¼Œä½ å°±å¯ä»¥ç¦»çº¿å®Œæˆè¿™ä¸ª workshopã€‚
è¿™æ˜¯è¿™ä¸ª workshop æ”¯æŒçš„æ‰€æœ‰çš„å¸¦ç‰ˆæœ¬å·çš„æ¨¡å—ï¼š


```bash
$ npm install express@4.11.2
$ npm install pug@2.0.0-beta6
$ npm install body-parser@1.12.0
$ npm install stylus@0.50.0
```

æ³¨æ„: åœ¨å®‰è£…ä¾èµ–ä¹‹å‰ï¼Œä½ éœ€è¦åœ¨ä½ çš„é¡¹ç›®æ–‡ä»¶å¤¹ä¸­åŒ…å«`node_modules` æˆ– `packagen.json`
è¿è¡Œ`$ mkdir node_modules` æˆ– `$ npm init` å¯ä»¥åˆ›å»ºå®ƒä»¬å…¶ä¸­ä¹‹ä¸€ã€‚
# é‡ç½®

å¦‚æœæ‚¨æƒ³è¦é‡ç½®å®ŒæˆæŒ‘æˆ˜çš„æ¸…å•ï¼Œå¯ä»¥åˆ é™¤ `~/.config/expressworks/completed.json` æ–‡ä»¶

![Hello World Express.js app](https://raw.github.com/azat-co/expressworks/master/images/finished.png)

# æ›´å¤šä¿¡æ¯

è¯·å‚é˜… [Express.js Guide](http://expressjsguide.com), [Pro Express.js](http://proexpressjs.com) å’Œ [FREE Express.js cheatsheet](https://gumroad.com/l/NQiQ/git-874E6FB4)ã€‚

# æ­¥éª¤


## Hello World

åˆ¶ä½œä¸€ä¸ªç›‘å¬åœ¨ localhost:3000 ï¼Œå½“æœ‰äººæ‰“å¼€ã€Œ/homeã€é¡µé¢æ—¶ä¼šè¾“å‡ºã€ŒHello World!ã€çš„ Express.js app ã€‚

expressworks ä¼šå°†ç›‘å¬çš„ port æ”¾åœ¨ç¬¬ä¸€ä¸ªå‚æ•° `process.argv[2]` ã€‚

## Pug

åˆ¶ä½œä¸€ä¸ªåœ¨ Home é¡µé¢ï¼ˆ/homeï¼‰ä»¥ Pug æ¨¡ç‰ˆæ˜¾ç¤ºç‰¹å®šä¿¡æ¯ï¼ˆtoDateStringï¼‰çš„ Express.js app ã€‚

## Good Old Form

ç¼–å†™ä¸€ä¸ªå¯å¤„ç† HTML è¡¨å•è¾“å…¥ ï¼ˆ`<form><input name="str"/></form>`ï¼‰ï¼Œå¹¶æ¥ç€æŠŠå­—ç¬¦ä¸²å€’è¿‡æ¥çš„è·¯ç”±ï¼ˆ`/form`ï¼‰

## Static

ä¸é€šè¿‡ä»»ä½•è·¯ç”±ï¼Œå°†é™æ€ middleware å¥—ç”¨è‡³æœåŠ¡å™¨çš„ index.html æ–‡ä»¶ã€‚è¿™ä¸ª index.html æ–‡ä»¶æ‰€åœ¨ä½ç½®å°†ä¼šé€šè¿‡ `process.argv[3]` æä¾›ç»™ç¨‹åºã€‚æ— è®ºå¦‚ä½•ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨å«æœ‰ä»¥ä¸‹å†…å®¹çš„æ¡£æ¡ˆï¼š

```html
  <html>
    <head>
      <link rel="stylesheet" type="text/css" href="/main.css"/>
    </head>
    <body>
      <p>I am red!</p>
    </body>
  </html>
```

## Stylish CSS

ä½¿ç”¨ Stylus middleware ä¸ºæ‚¨ä¹‹å‰ä½¿ç”¨çš„ HTML æ–‡ä»¶åŠ ä¸Šæ ·å¼ã€‚main.styl æ–‡ä»¶çš„æ‰€åœ¨ä½ç½®å°†ä¼šé€šè¿‡ `process.argv[3]` ä¼ ç»™ç¨‹åºï¼Œæˆ–æ‚¨ä¹Ÿå¯ä»¥ç”¨ä»¥ä¸‹çš„å†…å®¹å»ºç«‹æ‚¨è‡ªå·±çš„æ–‡ä»¶æˆ–ç›®å½•ï¼š

```
  p
    color red
```

index.html æ–‡ä»¶ï¼š

```html
  <html>
    <head>
      <title>expressworks</title>
      <link rel="stylesheet" type="text/css" href="/main.css"/>
    </head>
    <body>
      <p>I am red!</p>
    </body>
  </html>
```

## Param Pam Pam

å»ºç«‹ä¸€ä¸ªå¯ä»¥å¤„ç† PUT `/message/:id` è¯·æ±‚ï¼ˆå¦‚ PUT `/message/526aa677a8ceb64569c9d4fb`ï¼‰çš„ Express.js æœåŠ¡å™¨ã€‚

è¿™ä¸ªè¯·æ±‚çš„å›åº”æ˜¯ id çš„ SHA1 å“ˆå¸Œå€¼åŠ ä¸Šä¸€ä¸ªæ—¥æœŸã€‚

```javascript
  require('crypto')
    .createHash('sha1')
    .update(new Date().toDateString().toString() + id)
    .digest('hex')
```

## What's in Query

ç¼–å†™ä¸€ä¸ªä¼šè§£æGET `/search` ç½‘å€ query å­—ç¬¦ä¸²çš„è·¯ç”±ã€‚å¦‚ `?results=recent&include_tabs=true` ï¼Œå¹¶æŠŠç»“æœè½¬æ¢æˆ JSON æ ¼å¼è¼¸è¾“å‡ºã€‚

## JSON Me

ç¼–å†™ä¸€ä¸ªä¼šè¯»å…¥æ–‡ä»¶ï¼ˆæ–‡ä»¶åä¼šä»¥ `process.argv[3]` ä¼ ç»™ç¨‹åºï¼‰ï¼Œå¹¶ä»¥ JSON è§£ææ–‡ä»¶å†…å®¹ï¼Œç„¶åæŠŠå†…å®¹ä»¥ `res.json(object)` æ˜¾ç¤ºå‡ºä¾†ã€‚
